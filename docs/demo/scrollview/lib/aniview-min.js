!function(e,t){if("function"==typeof define&&define.amd)define.amd?define(["jQuery"],function(){return t(jQuery)}):define(function(e,n,o){var i=e("jQuery");o.exports=t(i)});else{if("object"!=typeof module||!module.exports)return t(e),e;module.exports=t(e)}}(jQuery,function(e){"use strict";function t(){if(p&&p[0].document!==window.document){var e=p.offset();return{top:p.scrollTop()+e.top,left:p.scrollLeft()+e.left}}return{top:p.scrollTop(),left:p[0].pageXOffset}}function n(){return t().top<=10}function o(){var e,n,o=t();return p&&p[0].document!==window.document?(e=window.document.documentElement.offsetHeight,n=window.document.documentElement.clientHeight):(e=p[0].offsetHeight+p[0].scrollTop,n=p[0].clientHeight),o.top+n>=e-10}function i(t,n){for(var o,i,a=Math.abs(n-t),c=0,u=!0,s=0;s<l.length;s++)if(r(l[s],!0)&&(o=e(l[s].ele),i=f(o[0]).top+o.height()*l[s].viewPercent,c=Math.abs(i-t),a>c)){u=!1;break}return u}function f(e){for(var t=e.offsetTop,n=e.offsetLeft;e.offsetParent;)e=e.offsetParent,isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft);return{top:t,left:n}}function r(r,a){var c=e(r.ele),u=r.viewPercent,s=t(),d=s.top,l=s.left,v=d+p.height(),h=l+p.width(),w=f(c[0]),b=w.top+c.height()*u,g=w.left+c.width()*u,y=b+(1-u)*c.height(),k=g+(1-u)*c.width(),A=b<=v&&y>=d&&g>=l&&k<=h;return!a&&A&&m&&(A=n()?i(d,b):o()?i(v,b):i(v-p.height()/2,b)),A}function a(e){return!r(e)&&e.blocked&&e.active}function c(e){return r(e)&&!e.blocked&&!e.active}function u(){e.each(l,function(e,t){t&&(c(t)?d.animate(t,!0):a(t)&&d.animate(t,!1))})}function s(t){var n=e.extend({},v,t);this.options=n,p=n.container||e(window),m=void 0!==n.nearest&&n.nearest,this.init(),p.on("scroll",function(){u()})}var d=void 0,l=[],p=void 0,m=!1,v={container:"",aniClass:".ani",viewPercent:.2,beforeAnimate:function(){},afterAnimate:function(){}};s.prototype.init=function(){var t=this,n=t.options,o=n.aniClass;e(o).each(function(t,o){l.push({ele:o,viewPercent:n.viewPercent,active:!1,blocked:!1,animation:e(o).data("viewAnimation"),timer:void 0})})},s.prototype.animate=function(t,n){var o=this,i=o.options;if(n){if(t.blocked)return!1;"function"==typeof i.beforeAnimate&&i.beforeAnimate(t),t.active=!0,t.blocked=!0,e(t.ele).addClass("active")}else e(t.ele).removeClass("active"),t.active=!1,t.blocked=!1,"function"==typeof i.afterAnimate&&i.afterAnimate(t)},e.extend({aniView:function(e){d||(d=new s(e),u())}})});